/* https://browserleaks.com/js/geo.js */
function googleapis(){$.ajaxSetup({cache:!0}),$.getScript("https://maps.googleapis.com/maps/api/js?v=3.exp&callback=initialize&free_key=pls_dont_use_it&key=AIzaSyAuJ4KCzEuWGVpzVFx53n8UYgbtxi7fMK0")}function initialize(){void 0!==navigator.geolocation&&($("#load").animate({width:"128px"},300),$("#geo-click").attr("disabled","disabled").removeClass("pointer"),navigator.geolocation.getCurrentPosition(success,error,{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}))}function permissions(){void 0!==navigator.permissions&&(navigator.permissions.query({name:"geolocation"}).then(function(a){function b(a){$("#geo-orig").find("div").addClass("n"),$("#orig-"+(void 0!==a.state?a.state:a.status)).removeClass("n")}b(a),a.onchange=function(){b(a)}}),$("#external").html('<iframe id="iframe" src="https://api.browserleaks.com/query/geolocation.html" class="n"></iframe>'),$(window).one("message",function(a){"https://api.browserleaks.com"==a.originalEvent.origin&&($("#geo-glob").find("div").addClass("n"),$("#glob-"+a.originalEvent.data).removeClass("n"))}),$("#geo-perm").removeClass("n"))}function success(a){function b(){map.set("scrollwheel",!0),google.maps.event.removeListener(k),google.maps.event.removeListener(l),google.maps.event.removeListener(m)}var c;for(var d in a.coords)a.coords[d]?(c=a.coords[d],"latitude"==d||"longitude"==d||"heading"==d?c+="&deg;":"accuracy"==d||"altitudeAccuracy"==d?(c>=1e4?c=Math.round(c/1e3)+" kilometers":c>=1e3?c=(c/1e3).toFixed(1)+" kilometers":c+=" meters",c="More or less "+c):"speed"==d&&(c+=" m/s"),$("#"+d).html(c).parent().removeClass("n")):$("#"+d).parent().addClass("n");if(a.timestamp?$("#timestamp").text(""+new Date(a.timestamp)).parent().removeClass("n"):$("#timestamp").parent().addClass("n"),$("#geo-content").removeClass("n"),$("#geo-warn").addClass("n"),a.coords.longitude&&a.coords.latitude){if(1!=Cookies.get("bl_map")){if($("#geo-canvas").removeClass("n"),$("#privacy-warn").addClass("n"),!window.latlon||a.coords.latitude+","+a.coords.longitude!=window.latlon)var e=new google.maps.Geocoder;var f=new google.maps.LatLng(a.coords.latitude,a.coords.longitude);if(e&&e.geocode({latLng:f},function(a,b){if(b==google.maps.GeocoderStatus.OK){for(var c="a1",d=0;d<a[0].address_components.length;d++)for(var e=0;e<a[0].address_components[d].types.length;e++)"country"==a[0].address_components[d].types[e]&&(c=a[0].address_components[d].short_name.toLowerCase());a[0]?$("#geocoder").html('<span class="country-flag" style="background-image:url(/img/flags/'+c+'.png)">'+a[0].formatted_address+"</span>").parent().removeClass("n"):$("#geocoder").text("No results found").parent().removeClass("n")}else $("#geocoder").text("Geocoder failed due to: "+b).parent().removeClass("n")}),window.map)map.setCenter(f);else{var g={zoom:10,center:f,mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:!1};map=new google.maps.Map(document.getElementById("geo-canvas"),g)}window.marker&&marker.setMap(null),window.circle&&circle.setMap(null),window.marker=new google.maps.Marker({position:f,map:map,animation:google.maps.Animation.DROP}),window.circle=new google.maps.Circle({center:f,radius:a.coords.accuracy,map:map,fillColor:"#0000FF",fillOpacity:.05,strokeColor:"#0000FF",strokeOpacity:.2});var h=$("#geo-canvas"),i={height:h.height(),width:h.width()},j=getBoundsZoomLevel(window.circle.getBounds(),i);map.setZoom(j-2);var k=google.maps.event.addListener(map,"click",b),l=google.maps.event.addListener(map,"rightclick",b),m=google.maps.event.addListener(map,"drag",b)}else $("#geo-canvas").addClass("n"),$("#geocoder").parent().addClass("n"),$("#privacy-warn").removeClass("n");window.latlon=a.coords.latitude+","+a.coords.longitude}$("#load").animate({width:"0px"},300,function(){$("#geo-click").attr("disabled",null).addClass("pointer")})}function error(a){$("#load").animate({width:"0px"},300,function(){$("#geo-click").attr("disabled",null).addClass("pointer")}),a.message?a.message="":a.message="- "+a.message;var b=["("+a.code+") UNKNOWN_ERROR "+a.message,"("+a.code+") PERMISSION_DENIED &mdash; User denied Geolocation","("+a.code+") POSITION_UNAVAILABLE &mdash; The current position could not be determined","("+a.code+") TIMEOUT "+a.message];$("#geo-warn").html('<div class="warn">'+b[a.code]+"</div>").removeClass("n"),$("#geo-content tr, #privacy-warn, #geo-canvas").addClass("n")}function getBoundsZoomLevel(a,b){function c(a){var b=Math.sin(a*Math.PI/180),c=Math.log((1+b)/(1-b))/2;return Math.max(Math.min(c,Math.PI),-Math.PI)/2}function d(a,b,c){return Math.floor(Math.log(a/b/c)/Math.LN2)}var e={height:256,width:256},f=a.getNorthEast(),g=a.getSouthWest(),h=(c(f.lat())-c(g.lat()))/Math.PI,i=f.lng()-g.lng(),j=(i<0?i+360:i)/360,k=d(b.height,e.height,h),l=d(b.width,e.width,j);return Math.min(k,l,21)}$(document).ready(function(){void 0!==navigator.geolocation?($("#geo-true").removeClass("n"),$("#geo-false").addClass("n"),$("#geo-click").attr("disabled",null).addClass("pointer")):$("#geo-click").attr("disabled","disabled").removeClass("pointer"),permissions(),Cookies.get("bl_geo")||Cookies.get("bl_map")?!Cookies.get("bl_geo")&&Cookies.get("bl_map")&&initialize():googleapis()}),$("#geo-click").click(function(){"undefined"==typeof google||Cookies.get("bl_map")?"undefined"!=typeof google||Cookies.get("bl_map")?(initialize(),$("#geo-canvas").addClass("n"),$("#geocoder").parent().addClass("n"),$("#privacy-warn").removeClass("n")):googleapis():initialize()});